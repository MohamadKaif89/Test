<!DOCTYPE html>
<html>
<head>
  <title>Employees Tree</title>

  <style>
    .employee{
      border: 1px solid #ccc;
      padding: 5px;
      margin: 5px 0;
      cursor: pointer;
      width: fit-content;
    }

    .children{
      margin-left: 25px;
    }
  </style>
</head>

<body>

<h3>Office Employees</h3>

<div id="tree"></div>

<script>
  // employee data
  const data = [
    {id:1, name:"John Smith - CEO", parent:0},
    {id:2, name:"Sarah Lee - Manager", parent:1},
    {id:3, name:"David Kumar - Team Lead", parent:2},
    {id:4, name:"Aditi Sharma - Developer", parent:3},
    {id:5, name:"Michael Brown - Manager", parent:1},
    {id:6, name:"Priya Patel - QA", parent:5}
  ];

  // build tree from parent ids
  function makeTree(parentId){
    let result = [];

    for(let i=0; i<data.length; i++){
      if(data[i].parent === parentId){
        let obj = data[i];
        obj.children = makeTree(obj.id);
        result.push(obj);
      }
    }
    return result;
  }

  let tree = makeTree(0);

  // create html
  function showEmployees(list){
    let html = "";

    for(let i=0; i<list.length; i++){
      html += `
        <div class="employee" onclick="toggle(this)">
          ${list[i].name}
          <div class="children">
            ${showEmployees(list[i].children)}
          </div>
        </div>
      `;
    }

    return html;
  }

  document.getElementById("tree").innerHTML = showEmployees(tree);

  // expand / collapse
  function toggle(el){
    event.stopPropagation();

    let c = el.querySelector(".children");

    if(c.style.display === "none"){
      c.style.display = "block";
    } else {
      c.style.display = "none";
    }
  }

  // start collapsed
  let all = document.querySelectorAll(".children");
  for(let i=1; i<all.length; i++){
    all[i].style.display = "none";
  }
</script>

</body>
</html>
      { id: 4, name: "Aditi Sharma", role: "Software Engineer", parent: 3 },
      { id: 5, name: "Michael Brown", role: "Manager", parent: 1 },
      { id: 6, name: "Priya Patel", role: "QA Engineer", parent: 5 }
    ];

    // --- Build Tree ---
    function buildTree(list, parent = 0) {
      return list
        .filter(item => item.parent === parent)
        .map(item => ({
          ...item,
          children: buildTree(list, item.id)
        }));
    }

    const tree = buildTree(employees);

    // --- Create HTML ---
    function toHtml(nodes){
      if(!nodes.length) return "";

      return nodes.map(n => `
        <div class="employee-box" onclick="toggleChildren(event)">
          <span class="toggle">➤</span>
          <strong>${n.name}</strong><br>
          <span class="role">${n.role}</span>

          <div class="children">
            ${toHtml(n.children)}
          </div>
        </div>
      `).join("");
    }

    document.getElementById("tree").innerHTML = toHtml(tree);

    // --- Toggle Children ---
    function toggleChildren(event){
      event.stopPropagation(); // stop bubbling

      const box = event.currentTarget;
      const children = box.querySelector(":scope > .children");
      const arrow = box.querySelector(":scope > .toggle");

      if(!children) return;

      if(children.style.display === "none"){
        children.style.display = "block";
        arrow.textContent = "➤";
      } else {
        children.style.display = "none";
        arrow.textContent = "▼";
      }
    }

    // --- Start collapsed except CEO ---
    document.querySelectorAll(".children").forEach((div, index) => {
      if(index !== 0) div.style.display = "none";
    });
  </script>

</body>
</html>
    // Convert tree → HTML (recursive)
    function toHtml(nodes) {
      if (!nodes.length) return "";

      return `
        <ul>
          ${nodes.map(n => `
            <li>
              ${n.name}
              ${toHtml(n.children)}
            </li>
          `).join('')}
        </ul>
      `;
    }

    // Insert into page
    document.getElementById("menu").innerHTML = toHtml(tree);
  </script>

</body>
</html>
